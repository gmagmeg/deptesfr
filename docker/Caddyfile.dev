{
    auto_https off
    debug
}

localhost {
    root * /app/public
    
    # Enable compression
    encode zstd gzip

    # PHP configuration with development settings
    php_server {
        resolve_root_symlink
        
        # Enable development settings
        env APP_ENV=local
        env APP_DEBUG=true
        
        # Enable XDebug
        env XDEBUG_MODE=develop,debug
        env XDEBUG_CONFIG="client_host=host.docker.internal client_port=9003"
    }

    # Serve static files directly
    @static {
        file {
            try_files {path} {path}/index.html
        }
        not path *.php
    }
    handle @static {
        file_server
    }

    # Default Handler
    handle {
        php_fastcgi
    }

    # Enable verbose logging for development
    log {
        format json
        level DEBUG
    }
} 